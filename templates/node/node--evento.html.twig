{#
/**
 * @file
 * Theme override to display an Evento (Event) node.
 *
 * Based on the event cards from CalendarView in App.tsx.
 *
 * Available variables:
 * - node: The full node entity.
 * - label: The title of the node.
 * - content: All node items.
 * - formatted_date: Formatted creation date.
 * - category_name: Name of the category taxonomy term.
 *
 * @see template_preprocess_node()
 */
#}

{# Set default classes #}
{% set classes = [
  'node',
  'node--type-' ~ node.bundle|clean_class,
  not node.isPublished() ? 'node--unpublished',
  view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
] %}

{# Mock data for static mockup (to be replaced with Drupal fields) #}
{% set mock_title = label|default('Town Hall Global') %}
{% set mock_description = 'Reunião mensal com toda a empresa para alinhamento estratégico e apresentação de resultados.' %}
{% set mock_date = '2023-11-05' %}
{% set mock_time = '10:00' %}
{% set mock_location = 'Auditório Principal & Zoom' %}
{% set mock_category = category_name|default('Diretoria') %}

{# Category indicator colors #}
{% set category_indicators = {
  'Social': 'bg-yellow-400',
  'RH': 'bg-brand-500',
  'Diretoria': 'bg-gray-400',
  'TI': 'bg-purple-500',
  'Operações': 'bg-green-500',
} %}
{% set indicator_class = category_indicators[mock_category]|default('bg-gray-400') %}

{# Format date parts #}
{% set weekday = mock_date|date('l') %}
{% set day = mock_date|date('d') %}
{% set month = mock_date|date('F') %}

{# Portuguese weekday/month mapping (simplified for mockup) #}
{% set weekday_pt = {
  'Monday': 'segunda-feira',
  'Tuesday': 'terça-feira',
  'Wednesday': 'quarta-feira',
  'Thursday': 'quinta-feira',
  'Friday': 'sexta-feira',
  'Saturday': 'sábado',
  'Sunday': 'domingo',
} %}
{% set month_pt = {
  'January': 'janeiro',
  'February': 'fevereiro',
  'March': 'março',
  'April': 'abril',
  'May': 'maio',
  'June': 'junho',
  'July': 'julho',
  'August': 'agosto',
  'September': 'setembro',
  'October': 'outubro',
  'November': 'novembro',
  'December': 'dezembro',
} %}

<article{{ attributes.addClass(classes) }}>
  
  {# Full View Mode #}
  {% if view_mode == 'full' %}
  
    <div class="space-y-6 animate-fade-in">
      
      {# Event Header Card #}
      <section class="card bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100">
        
        {# Color Indicator Bar #}
        <div class="h-2 {{ indicator_class }}"></div>
        
        <div class="p-8">
          
          {# Date and Category #}
          <div class="flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4">
            <div>
              <span class="text-sm font-bold text-gray-400 uppercase tracking-wider">
                {{ weekday_pt[weekday]|default(weekday) }}
              </span>
              <div class="text-3xl font-bold text-gray-900">
                {{ day }} de {{ month_pt[month]|default(month) }}
              </div>
            </div>
            <div class="p-3 bg-gray-50 rounded-xl text-gray-400">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                <line x1="16" x2="16" y1="2" y2="6"/>
                <line x1="8" x2="8" y1="2" y2="6"/>
                <line x1="3" x2="21" y1="10" y2="10"/>
              </svg>
            </div>
          </div>
          
          {# Title #}
          <h1 class="text-3xl font-bold text-gray-900 mb-4">
            {{ mock_title }}
          </h1>
          
          {# Description #}
          <div class="prose prose-lg max-w-none text-gray-600 mb-8">
            {% if content.body|render|trim %}
              {{ content.body }}
            {% else %}
              <p>{{ mock_description }}</p>
            {% endif %}
          </div>
          
          {# Event Details #}
          <div class="grid md:grid-cols-2 gap-6 py-6 border-t border-gray-100">
            
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-brand-50 rounded-xl flex items-center justify-center text-brand-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
              </div>
              <div>
                <span class="text-sm font-semibold text-gray-400 uppercase tracking-wide">{{ 'Horário'|t }}</span>
                <p class="text-lg font-medium text-gray-900">{{ mock_time }}</p>
              </div>
            </div>
            
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-brand-50 rounded-xl flex items-center justify-center text-brand-600">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                  <circle cx="12" cy="10" r="3"/>
                </svg>
              </div>
              <div>
                <span class="text-sm font-semibold text-gray-400 uppercase tracking-wide">{{ 'Local'|t }}</span>
                <p class="text-lg font-medium text-gray-900">{{ mock_location }}</p>
              </div>
            </div>
            
          </div>
          
          {# Action Buttons #}
          <div class="flex flex-wrap gap-3 pt-6 border-t border-gray-100">
            <button type="button" class="btn btn--primary inline-flex items-center gap-2 bg-brand-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-700 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                <line x1="16" x2="16" y1="2" y2="6"/>
                <line x1="8" x2="8" y1="2" y2="6"/>
                <line x1="3" x2="21" y1="10" y2="10"/>
                <line x1="12" x2="12" y1="14" y2="18"/>
                <line x1="10" x2="14" y1="16" y2="16"/>
              </svg>
              {{ 'Adicionar ao Calendário'|t }}
            </button>
            
            <button type="button" class="btn btn--secondary inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium border border-gray-200 text-gray-600 hover:bg-gray-50 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                <polyline points="16 6 12 2 8 6"/>
                <line x1="12" x2="12" y1="2" y2="15"/>
              </svg>
              {{ 'Compartilhar'|t }}
            </button>
          </div>
          
        </div>
      </section>
      
      {# Back Link #}
      <div class="mt-8">
        <a href="/agenda" class="inline-flex items-center gap-2 text-brand-600 hover:text-brand-800 font-medium transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
          </svg>
          {{ 'Voltar para Agenda'|t }}
        </a>
      </div>
      
    </div>
  
  {% else %}
  
    {# Teaser View Mode (for listings - card style) #}
    <div class="event-card card bg-white rounded-2xl shadow-sm border border-gray-100 p-6 flex flex-col relative overflow-hidden group hover:shadow-md transition-all">
      
      {# Category Indicator #}
      <div class="event-card__indicator absolute top-0 left-0 w-1 h-full {{ indicator_class }}"></div>
      
      {# Header #}
      <div class="event-card__header flex justify-between items-start mb-4 pl-4">
        <div>
          <span class="event-card__weekday text-sm font-bold text-gray-400 uppercase tracking-wider">
            {{ weekday_pt[weekday]|default(weekday) }}
          </span>
          <div class="event-card__date text-2xl font-bold text-gray-900">
            {{ day }} de {{ month_pt[month]|default(month) }}
          </div>
        </div>
        <div class="p-2 bg-gray-50 rounded-lg text-gray-400">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
            <line x1="16" x2="16" y1="2" y2="6"/>
            <line x1="8" x2="8" y1="2" y2="6"/>
            <line x1="3" x2="21" y1="10" y2="10"/>
          </svg>
        </div>
      </div>

      {# Content #}
      <div class="pl-4 flex-1">
        <h3 class="event-card__title text-lg font-bold text-gray-900 mb-2">
          <a href="{{ url }}" class="hover:text-brand-600 transition-colors">{{ mock_title }}</a>
        </h3>
        <p class="event-card__description text-gray-500 text-sm mb-4 line-clamp-2">{{ mock_description }}</p>
        
        {# Meta #}
        <div class="event-card__meta flex flex-col gap-2 text-sm text-gray-600 border-t border-gray-100 pt-4">
          <div class="flex items-center gap-2">
            <span class="event-card__meta-label w-20 text-gray-400 text-xs uppercase font-semibold">{{ 'Horário:'|t }}</span>
            <span>{{ mock_time }}</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="event-card__meta-label w-20 text-gray-400 text-xs uppercase font-semibold">{{ 'Local:'|t }}</span>
            <span>{{ mock_location }}</span>
          </div>
        </div>
      </div>
      
      {# Action Button #}
      <div class="pl-4 mt-6">
        <a href="{{ url }}" class="w-full block text-center py-2 border border-brand-200 text-brand-600 rounded-lg text-sm font-medium hover:bg-brand-50 transition-colors">
          {{ 'Ver detalhes'|t }}
        </a>
      </div>
      
    </div>
  
  {% endif %}
  
</article>

